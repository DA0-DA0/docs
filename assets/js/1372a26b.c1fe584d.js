"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9642],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>p});var a=t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,s=function(e,n){if(null==e)return{};var t,a,s={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var l=a.createContext({}),u=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(t),p=s,g=m["".concat(l,".").concat(p)]||m[p]||d[p]||o;return t?a.createElement(g,r(r({ref:n},c),{},{components:t})):a.createElement(g,r({ref:n},c))}));function p(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var o=t.length,r=new Array(o);r[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,r[1]=i;for(var u=2;u<o;u++)r[u]=t[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2468:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var a=t(7462),s=(t(7294),t(3905));const o={sidebar_position:2},r="SubDAO Admin",i={unversionedId:"subdaos/admin",id:"subdaos/admin",title:"SubDAO Admin",description:"A SubDAO is a DAO that has another DAO as it's admin, implying a heirachical power relationship. The SubDAO admin has the ability to execute any message on behalf of the SubDAO, including spending it's treasury, managing members, pausing the SubDAO, or executing a smart contract message through it. This doc is about how to do that!",source:"@site/docs/subdaos/admin.md",sourceDirName:"subdaos",slug:"/subdaos/admin",permalink:"/docs/subdaos/admin",draft:!1,editUrl:"https://github.com/DA0-DA0/docs/tree/main/docs/subdaos/admin.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"What are SubDAOs?",permalink:"/docs/subdaos/what_are_subdaos"},next:{title:"V1 -> V2",permalink:"/docs/upgrading/v2"}},l={},u=[{value:"Administering a SubDAO with the UI",id:"administering-a-subdao-with-the-ui",level:2},{value:"Manually Contstructing DAO Admin Execute JSON Messages",id:"manually-contstructing-dao-admin-execute-json-messages",level:2},{value:"Spending a SubDAOs funds",id:"spending-a-subdaos-funds",level:3},{value:"SubDAO Smart contract calls",id:"subdao-smart-contract-calls",level:3}],c={toc:u};function d(e){let{components:n,...o}=e;return(0,s.kt)("wrapper",(0,a.Z)({},c,o,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"subdao-admin"},"SubDAO Admin"),(0,s.kt)("p",null,"A SubDAO is a DAO that has another DAO as it's admin, implying a heirachical power relationship. The SubDAO admin has the ability to execute any message on behalf of the SubDAO, including spending it's treasury, managing members, pausing the SubDAO, or executing a smart contract message through it. This doc is about how to do that!"),(0,s.kt)("h2",{id:"administering-a-subdao-with-the-ui"},"Administering a SubDAO with the UI"),(0,s.kt)("p",null,"In the DAO DAO UI, it's very easy to control a SubDAO through proposals. "),(0,s.kt)("p",null,'In the parent DAO, simply create a new proposal and add a "DAO Admin Execute" action. A list of SubDAOs will be displayed, select the one you want to execute an admin action for. Then simply, choose the action you want to execute!'),(0,s.kt)("p",null,"In this example, we add a new voting member to a SubDAO using DAO Admin Execute:\n",(0,s.kt)("img",{src:t(6042).Z,width:"1305",height:"888"})),(0,s.kt)("h2",{id:"manually-contstructing-dao-admin-execute-json-messages"},"Manually Contstructing DAO Admin Execute JSON Messages"),(0,s.kt)("p",null,"For some use cases like in smart contracting or Cosmos SDK gov props, it's sometimes necessary to format this message manually. The transaction builder UI can still be helpful for figuring out how you want to format your particular message. See: ",(0,s.kt)("a",{parentName:"p",href:"https://daodao.zone/me/tx"},"https://daodao.zone/me/tx")),(0,s.kt)("p",null,"DAO Admin Execute will always call the SubDAO contract address, and wrap all messages to be executed in ",(0,s.kt)("inlineCode",{parentName:"p"},"execute_admin_msgs")," which has a ",(0,s.kt)("inlineCode",{parentName:"p"},"msgs")," field that contains a list of all CosmWasm messages to execute. "),(0,s.kt)("p",null,"Below are a list of some example messages."),(0,s.kt)("h3",{id:"spending-a-subdaos-funds"},"Spending a SubDAOs funds"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "wasm": {\n      "execute": {\n        "contract_addr": "<SUBDAO_ADDRESS>",\n        "funds": [],\n        "msg": {\n          "execute_admin_msgs": {\n            "msgs": [\n              {\n                "bank": {\n                  "send": {\n                    "amount": [\n                      {\n                        "amount": "<AMOUNT>",\n                        "denom": "<DENOM>"\n                      }\n                    ],\n                    "to_address": "<DESTINATION_ADDRESS>"\n                  }\n                }\n              }\n            ]\n          }\n        }\n      }\n    }\n}\n')),(0,s.kt)("h3",{id:"subdao-smart-contract-calls"},"SubDAO Smart contract calls"),(0,s.kt)("p",null,"SubDAO smart contract calls are similar to spending SubDAO funds. However, WASM execute msgs in ",(0,s.kt)("inlineCode",{parentName:"p"},"execute_admin_msgs")," need to be encoded as base64, this guide will walk you through how to do this. Tools like ",(0,s.kt)("a",{parentName:"p",href:"https://www.base64encode.org/"},"base64encode")," and ",(0,s.kt)("a",{parentName:"p",href:"https://www.base64decode.org/"},"base64decode")," are helpful for encoding and validating messages."),(0,s.kt)("p",null,"For this example, we'll be canceling a vesting contract."),(0,s.kt)("p",null,"Unencoded:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'  {\n    "wasm": {\n      "execute": {\n        "contract_addr": "<SUBDAO_ADDRESS>",\n        "funds": [],\n        "msg": {\n          "execute_admin_msgs": {\n            "msgs": [\n              {\n                "wasm": {\n                  "execute": {\n                    "contract_addr": "<VESTING_CONTRACT>",\n                    "funds": [],\n                    "msg": {\n                      "cancel": {}\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      }\n    }\n  }\n')),(0,s.kt)("p",null,"If we submitted this on the CLI, or using the Custom Message action in the DAO DAO UI, it would fail."),(0,s.kt)("p",null,"To fix it, we need to encode WASM execute message's ",(0,s.kt)("inlineCode",{parentName:"p"},"msg")," field. In our case:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{"cancel": {}}\n')),(0,s.kt)("p",null,"Is encoded as:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"eyJjYW5jZWwiOiB7fX0=\n")),(0,s.kt)("p",null,"The final message now looks like this:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'  {\n    "wasm": {\n      "execute": {\n        "contract_addr": "<SUBDAO_ADDRESS>",\n        "funds": [],\n        "msg": {\n          "execute_admin_msgs": {\n            "msgs": [\n              {\n                "wasm": {\n                  "execute": {\n                    "contract_addr": "<VESTING_CONTRACT>",\n                    "funds": [],\n                    "msg": "eyJjYW5jZWwiOiB7fX0="\n                  }\n                }\n              }\n            ]\n          }\n        }\n      }\n    }\n  }\n')),(0,s.kt)("p",null,"This process is the same for most things you'll want to manage on SubDAOs, such as managing DAO membership."))}d.isMDXComponent=!0},6042:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/dao-admin-execute-59ae6a16db8a5d4751ac838aa055b03a.png"}}]);